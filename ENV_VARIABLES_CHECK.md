# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ collector** - –¥–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è `STORAGE_DIR` –≤ `collector/utils/files/index.js`
2. **–£–ª—É—á—à–µ–Ω docker-entrypoint.sh** - —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `STORAGE_DIR=/app/server/storage`, –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –∑–∞–¥–∞–Ω–∞

## üìã –ê–Ω–∞–ª–∏–∑ –≤–∞—à–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã):

```
DATABASE_PUBLIC_URL - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
DATABASE_URL - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞  
PGDATA - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
PGDATABASE - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
PGHOST - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
PGPASSWORD - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
PGPORT - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
PGUSER - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
POSTGRES_DB - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
POSTGRES_PASSWORD - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
POSTGRES_USER - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
RAILWAY_DEPLOYMENT_DRAINING_SECONDS - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
SSL_CERT_DAYS - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

### ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å):

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production
NODE_ENV=production

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç fallback, –Ω–æ –ª—É—á—à–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —è–≤–Ω–æ)
STORAGE_DIR=/app/server/storage

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (–¥–ª—è Docker)
ANYTHING_LLM_RUNTIME=docker
```

#### –î–ª—è —Ä–∞–±–æ—Ç—ã LLM (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä):

```env
# OpenRouter
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=–≤–∞—à-–∫–ª—é—á

# –ò–ª–∏ OpenAI
# LLM_PROVIDER=openai
# OPEN_AI_KEY=–≤–∞—à-–∫–ª—é—á

# –ò–ª–∏ Anthropic
# LLM_PROVIDER=anthropic
# ANTHROPIC_API_KEY=–≤–∞—à-–∫–ª—é—á
```

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ:

```env
# –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
VECTOR_DB=lancedb

# –î–≤–∏–∂–æ–∫ –¥–ª—è embeddings
EMBEDDING_ENGINE=inherit

# –ü–æ—Ä—Ç –¥–ª—è collector (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8888)
COLLECTOR_PORT=8888

# –ü–æ—Ä—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (Railway —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ PORT)
# PORT —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

# –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DISABLE_TELEMETRY=true
```

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

### 1. collector/utils/files/index.js
- –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è `STORAGE_DIR` –≤ production —Ä–µ–∂–∏–º–µ
- –¢–µ–ø–µ—Ä—å collector –Ω–µ —É–ø–∞–¥–µ—Ç, –µ—Å–ª–∏ `STORAGE_DIR` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

### 2. docker/docker-entrypoint.sh
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `STORAGE_DIR=/app/server/storage`, –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –∑–∞–¥–∞–Ω–∞
- –°–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

## üìù –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Railway

```env
# === –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ ===
NODE_ENV=production
ANYTHING_LLM_RUNTIME=docker
STORAGE_DIR=/app/server/storage

# === –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Railway) ===
DATABASE_URL=postgresql://...
DATABASE_PUBLIC_URL=postgresql://...
PGUSER=postgres
PGPASSWORD=...
PGDATABASE=railway
PGHOST=...
PGPORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=...
POSTGRES_DB=railway

# === LLM Provider (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω) ===
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=–≤–∞—à-–∫–ª—é—á

# === –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ===
VECTOR_DB=lancedb
EMBEDDING_ENGINE=inherit
COLLECTOR_PORT=8888
DISABLE_TELEMETRY=true

# === Railway —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã) ===
RAILWAY_DEPLOYMENT_DRAINING_SECONDS=60
SSL_CERT_DAYS=820
PGDATA=/var/lib/postgresql/data/pgdata
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ Collector –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è `STORAGE_DIR`
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –±–µ–∑ —è–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `STORAGE_DIR` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—Å–µ –∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `STORAGE_DIR` —è–≤–Ω–æ –¥–ª—è production

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway:
   - `NODE_ENV=production`
   - `STORAGE_DIR=/app/server/storage`
   - `ANYTHING_LLM_RUNTIME=docker`
   - `LLM_PROVIDER=...` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π API –∫–ª—é—á

2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π –Ω–∞ Railway

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - collector –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
